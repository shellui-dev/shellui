@namespace ShellUI.Components

<button type="button"
        @onclick="HandleClick"
        disabled="@Disabled"
        class="@ComputedClass"
        @attributes="AdditionalAttributes">
    @ChildContent
</button>

@code {
    [Parameter] public bool Pressed { get; set; }
    [Parameter] public EventCallback<bool> PressedChanged { get; set; }
    [Parameter] public ToggleVariant Variant { get; set; } = ToggleVariant.Default;
    [Parameter] public ToggleSize Size { get; set; } = ToggleSize.Default;
    [Parameter] public bool Disabled { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public string? Class { get; set; }
    [Parameter(CaptureUnmatchedValues = true)]
    public Dictionary<string, object>? AdditionalAttributes { get; set; }
    
    private string ComputedClass => ToggleVariants.Get(Variant, Size, Pressed, Class);

    private async Task HandleClick()
    {
        Pressed = !Pressed;
        await PressedChanged.InvokeAsync(Pressed);
    }
}
