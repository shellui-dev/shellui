@page "/"
@using BlazorInteractiveServer.Components.UI
@using BlazorInteractiveServer.Components.Models
@using BlazorInteractiveServer.Components.Demo
@using Microsoft.AspNetCore.Components.Forms
@using BlazorInteractiveServer.Components

<PageTitle>ShellUI - Component Demo</PageTitle>

<div class="p-4 sm:p-6 md:p-8 max-w-4xl mx-auto">
    <div class="mb-8">
        <h1 class="text-2xl sm:text-3xl md:text-4xl font-bold mb-2 text-foreground">ShellUI Components</h1>
        <p class="text-sm sm:text-base text-muted-foreground">Beautiful, accessible components inspired by shadcn/ui</p>
    </div>

    <!-- Responsive Design Info -->
    <div class="mb-8 rounded-lg border border-border bg-muted/50 p-4 sm:p-6">
        <h2 class="text-lg sm:text-xl font-semibold mb-2 text-foreground">Responsive Design</h2>
        <p class="text-sm text-muted-foreground mb-3">All components support Tailwind's responsive utilities. Resize your browser to see it in action!</p>
        <div class="flex flex-col sm:flex-row gap-2">
            <Button class="w-full sm:w-auto" Size="@ButtonSize.Sm">Mobile First</Button>
            <Button class="hidden sm:inline-flex">Tablet+</Button>
            <Button class="hidden md:inline-flex">Desktop+</Button>
        </div>
    </div>

    <div class="space-y-8">
        <ButtonsDemo />
        <FormsDemo />
        <CardsAlertsDemo />
        <BadgesDialogDemo />
        <ChartsDemo />
    </div>

    <div class="mt-12 p-6 bg-muted rounded-lg border border-border">
        <h3 class="font-semibold mb-2 text-foreground">Installation</h3>
        <code class="text-sm px-2 py-1 bg-background rounded border border-border">dotnet shellui add button</code>
        <p class="text-sm text-muted-foreground mt-2">
            Component will be copied to your Components/UI folder for full customization!
        </p>
    </div>

    <!-- Component Showcases -->
    <div class="mt-12 space-y-8">
        <FormControlsDemo SelectedFruit="@selectedFruit" SelectedFruitChanged="HandleSelectedFruitChanged"
                          AcceptTerms="@acceptTerms" AcceptTermsChanged="HandleAcceptTermsChanged"
                          Notifications="@notifications" NotificationsChanged="HandleNotificationsChanged"
                          RadioGroup="@(null)" SelectedOption="@selectedOption" SelectedOptionChanged="HandleSelectedOptionChanged"
                          SliderValue="@sliderValue" SliderValueChanged="HandleSliderValueChanged"
                          Temperature="@temperature" TemperatureChanged="HandleTemperatureChanged"
                          TogglePressed="@togglePressed" TogglePressedChanged="HandleTogglePressedChanged"
                          TogglePressed2="@togglePressed2" TogglePressed2Changed="HandleTogglePressed2Changed"
                          TogglePressed3="@togglePressed3" TogglePressed3Changed="HandleTogglePressed3Changed" />
        
        <DataDisplayDemo />
        
        <FileUploadDemo />
        
        <NavigationDemo IsSidebarOpen="@isSidebarOpen" IsSidebarOpenChanged="HandleSidebarOpenChanged" />
        
        <OverlayDemo IsDropdownOpen="@isDropdownOpen" IsDropdownOpenChanged="HandleDropdownOpenChanged"
                     IsPopoverOpen="@isPopoverOpen" IsPopoverOpenChanged="HandlePopoverOpenChanged"
                     ShowToast="@showToast" ShowToastChanged="HandleShowToastChanged"
                     ShowDestructiveToast="@showDestructiveToast" ShowDestructiveToastChanged="HandleShowDestructiveToastChanged"
                     ShowSuccessToast="@showSuccessToast" ShowSuccessToastChanged="HandleShowSuccessToastChanged"
                     ShowWarningToast="@showWarningToast" ShowWarningToastChanged="HandleShowWarningToastChanged" />
        
        <AdvancedFormDemo Otp1="@otp1" Otp1Changed="HandleOtp1Changed"
                          Otp2="@otp2" Otp2Changed="HandleOtp2Changed"
                          Otp3="@otp3" Otp3Changed="HandleOtp3Changed"
                          SelectedTech="@selectedTech" SelectedTechChanged="HandleSelectedTechChanged"
                          SelectedFramework="@selectedFramework" SelectedFrameworkChanged="HandleSelectedFrameworkChanged"
                          SelectedDate="@selectedDate" SelectedDateChanged="HandleSelectedDateChanged"
                          SelectedDate2="@selectedDate2" SelectedDate2Changed="HandleSelectedDate2Changed"
                          RangeStartDate="@rangeStartDate" RangeStartDateChanged="HandleRangeStartDateChanged"
                          RangeEndDate="@rangeEndDate" RangeEndDateChanged="HandleRangeEndDateChanged"
                          SelectedTime="@selectedTime" SelectedTimeChanged="HandleSelectedTimeChanged"
                          FormName="@formName" FormNameChanged="HandleFormNameChanged"
                          FormEmail="@formEmail" FormEmailChanged="HandleFormEmailChanged"
                          FormPhone="@formPhone" FormPhoneChanged="HandleFormPhoneChanged"
                          FormSubmitted="@formSubmitted" FormSubmittedChanged="HandleFormSubmittedChanged" />
        
        <ComplexComponentsDemo Users="@users" UserColumns="@userColumns" UserActions="@userActions"
                              ShowAlertDialog="@showAlertDialog" ShowAlertDialogChanged="HandleShowAlertDialogChanged"
                              SelectedCalendarDate="@selectedCalendarDate" SelectedCalendarDateChanged="HandleSelectedCalendarDateChanged"
                              HoverCardText="@hoverCardText" HoverCardUser="@hoverCardUser"
                              ShowCommand="@showCommand" ShowCommandChanged="HandleShowCommandChanged"
                              CommandItems="@commandItems" OnCommandSelected="HandleCommandSelected"
                              ContextMenuItems="@contextMenuItems" OnContextMenuSelect="HandleContextMenuSelect"
                              TabItems="@tabItems" ActiveTab="@activeTab" ActiveTabChanged="HandleTabChange"
                              StepperSteps="@stepperSteps" CurrentStep="@currentStep" CurrentStepChanged="HandleStepChange"
                              TextCarouselSlide="@textCarouselSlide" TextCarouselSlideChanged="HandleTextCarouselSlideChange"
                              ImageCarouselSlide="@imageCarouselSlide" ImageCarouselSlideChanged="HandleImageCarouselSlideChange"
                              CurrentPage="@currentPage" CurrentPageChanged="HandlePageChange" TotalPages="@totalPages" />
    </div>

    <!-- Toast Notifications -->
    <Toast @bind-IsVisible="showToast" Title="Notification" Description="Your action was successful!" />
    <Toast @bind-IsVisible="showDestructiveToast" Title="Error" Description="Something went wrong!" Variant="destructive" />
    <Toast @bind-IsVisible="showSuccessToast" Title="Success" Description="Changes saved successfully!" Variant="success" Position="top-right" />
    <Toast @bind-IsVisible="showWarningToast" Title="Warning" Description="Please review this action!" Variant="warning" Position="top-right" />
</div>

@code {
    private bool isDropdownOpen = false;
    private bool isSidebarOpen = false;
    private bool isPopoverOpen = false;
    private bool showToast = false;
    private bool showDestructiveToast = false;
    private bool showSuccessToast = false;
    private bool showWarningToast = false;

    // Form Controls
    private string selectedFruit = "";
    private bool acceptTerms = false;
    private bool notifications = true;
    private string selectedOption = "";
    private double sliderValue = 50;
    private double temperature = 20;
    private bool togglePressed = false;
    private bool togglePressed2 = false;
    private bool togglePressed3 = false;
    
    // Advanced Forms
    private string otp1 = "";
    private string otp2 = "";
    private string otp3 = "";
    private string selectedTech = "";
    private string selectedFramework = "";
    private DateTime? selectedDate;
    private DateTime? selectedDate2 = DateTime.Now;
    private DateTime? rangeStartDate;
    private DateTime? rangeEndDate;
    private TimeSpan? selectedTime;
    private string formName = "";
    private string formEmail = "";
    private string formPhone = "";
    private bool formSubmitted = false;
    
    // Complex Components
    private bool showAlertDialog = false;
    private bool showCommand = false;
    private DateTime? selectedCalendarDate;
    private string hoverCardText = "Hover me!";
    private string hoverCardUser = "Shewart Shepherd";
    private string activeTab = "overview";
    private int currentStep = 0;
    private int textCarouselSlide = 0;
    private int imageCarouselSlide = 0;
    private int currentPage = 1;
    private int totalPages = 10;

    private List<string> techOptions = new() 
    { 
        "C#", "JavaScript", "TypeScript", "Python", "Java", "Go", "Rust", "F#"
    };
    
    private List<string> frameworkOptions = new() 
    { 
        "Blazor", "ASP.NET Core", "React", "Vue", "Angular", "Next.js", "Svelte", "ShellUI"
    };

    private List<DataTableColumn<User>> userColumns = new()
    {
        new DataTableColumn<User>
        {
            Header = "Name",
            PropertyName = "Name",
            Sortable = true,
            CellTemplate = context => builder => builder.AddContent(0, context.Name)
        },
        new DataTableColumn<User>
        {
            Header = "Email",
            PropertyName = "Email",
            Sortable = true,
            CellTemplate = context => builder => builder.AddContent(0, context.Email)
        },
        new DataTableColumn<User>
        {
            Header = "Phone",
            PropertyName = "Phone",
            Sortable = true,
            CellTemplate = context => builder => builder.AddContent(0, context.Phone)
        },
        new DataTableColumn<User>
        {
            Header = "Role",
            PropertyName = "Role",
            CellTemplate = context => builder =>
            {
                builder.OpenComponent<Badge>(0);
                builder.AddAttribute(1, "Variant", context.Role == "Admin" ? BadgeVariant.Destructive : BadgeVariant.Default);
                builder.AddAttribute(2, "ChildContent", (RenderFragment)(childBuilder => childBuilder.AddContent(0, context.Role)));
                builder.CloseComponent();
            }
        }
    };

    private List<DataTableAction<User>> userActions = new();

    private List<CommandItem> commandItems = new()
    {
        new CommandItem { Title = "New File", Description = "Create a new file", Shortcut = "Ctrl+N", Action = async () => await Task.CompletedTask },
        new CommandItem { Title = "Open File", Description = "Open an existing file", Shortcut = "Ctrl+O", Action = async () => await Task.CompletedTask },
        new CommandItem { Title = "Save File", Description = "Save the current file", Shortcut = "Ctrl+S", Action = async () => await Task.CompletedTask },
        new CommandItem { Title = "Settings", Description = "Open application settings", Shortcut = "Ctrl+,", Action = async () => await Task.CompletedTask },
        new CommandItem { Title = "Help", Description = "Show help documentation", Shortcut = "F1", Action = async () => await Task.CompletedTask }
    };

    private List<ContextMenuItem> contextMenuItems = new();

    private List<TabItem> tabItems = new();

    private List<StepItem> stepperSteps = new()
    {
        new StepItem 
        { 
            Title = "Account Setup", 
            Description = "Create your account",
            Content = builder => builder.AddMarkupContent(0, "<p>Enter your account details here.</p>")
        },
        new StepItem 
        { 
            Title = "Profile Information", 
            Description = "Complete your profile",
            Content = builder => builder.AddMarkupContent(0, "<p>Add your profile information.</p>")
        },
        new StepItem 
        { 
            Title = "Preferences", 
            Description = "Set your preferences",
            Content = builder => builder.AddMarkupContent(0, "<p>Configure your preferences.</p>")
        },
        new StepItem 
        { 
            Title = "Review", 
            Description = "Review and confirm",
            Content = builder => builder.AddMarkupContent(0, "<p>Review your information and confirm.</p>")
        }
    };

    private List<User> users = new()
    {
        new User { Name = "Shewart Shepherd", Email = "shep@shell-tech.dev", Phone = "+263780000000", Role = "Admin" },
        new User { Name = "John Doe", Email = "john@example.com", Phone = "+1234567890", Role = "User" },
        new User { Name = "Jane Smith", Email = "jane@example.com", Phone = "+0987654321", Role = "Moderator" },
        new User { Name = "Bob Johnson", Email = "bob@example.com", Phone = "+1122334455", Role = "User" },
        new User { Name = "Alice Brown", Email = "alice@example.com", Phone = "+5566778899", Role = "User" },
        new User { Name = "Charlie Wilson", Email = "charlie@example.com", Phone = "+9988776655", Role = "User" },
        new User { Name = "Diana Prince", Email = "diana@example.com", Phone = "+1122334455", Role = "Moderator" },
        new User { Name = "Eve Adams", Email = "eve@example.com", Phone = "+5544332211", Role = "User" },
        new User { Name = "Frank Miller", Email = "frank@example.com", Phone = "+6677889900", Role = "User" },
        new User { Name = "Grace Lee", Email = "grace@example.com", Phone = "+3344556677", Role = "Admin" },
        new User { Name = "Henry Ford", Email = "henry@example.com", Phone = "+8899001122", Role = "User" },
        new User { Name = "Ivy Chen", Email = "ivy@example.com", Phone = "+4455667788", Role = "Moderator" }
    };

    protected override void OnInitialized()
    {
        userActions = new List<DataTableAction<User>>
        {
            new DataTableAction<User> { Label = "Edit", Action = item => EditUser(item) },
            new DataTableAction<User> { Label = "Delete", Action = item => DeleteUser(item) }
        };

        contextMenuItems = new List<ContextMenuItem>
        {
            new ContextMenuItem { Label = "Copy", Icon = "<span class=\"material-symbols-outlined\" style=\"font-size: 0.875rem; line-height: 1;\">content_copy</span>", Shortcut = "Ctrl+C" },
            new ContextMenuItem { Label = "Paste", Icon = "<span class=\"material-symbols-outlined\" style=\"font-size: 0.875rem; line-height: 1;\">content_paste</span>", Shortcut = "Ctrl+V" },
            new ContextMenuItem { IsSeparator = true },
            new ContextMenuItem { Label = "Cut", Icon = "<span class=\"material-symbols-outlined\" style=\"font-size: 0.875rem; line-height: 1;\">content_cut</span>", Shortcut = "Ctrl+X" },
            new ContextMenuItem { Label = "Delete", Icon = "<span class=\"material-symbols-outlined\" style=\"font-size: 0.875rem; line-height: 1;\">delete</span>", Shortcut = "Del", Disabled = true }
        };

        tabItems = new List<TabItem>
        {
            new TabItem 
            { 
                Id = "overview", 
                Label = "Overview", 
                Icon = "<span class=\"material-symbols-outlined text-sm\">bar_chart</span>",
                Content = builder => builder.AddMarkupContent(0, "<p>This is the overview tab content.</p>")
            },
            new TabItem 
            { 
                Id = "settings", 
                Label = "Settings", 
                Icon = "<span class=\"material-symbols-outlined text-sm\">settings</span>",
                Content = builder => builder.AddMarkupContent(0, "<p>This is the settings tab content.</p>")
            },
            new TabItem 
            { 
                Id = "analytics", 
                Label = "Analytics", 
                Icon = "<span class=\"material-symbols-outlined text-sm\">trending_up</span>",
                Content = builder => builder.AddMarkupContent(0, "<p>This is the analytics tab content.</p>")
            }
        };
    }

    // Event Handlers
    private void HandleSelectedFruitChanged(string value) => selectedFruit = value;
    private void HandleAcceptTermsChanged(bool value) => acceptTerms = value;
    private void HandleNotificationsChanged(bool value) => notifications = value;
    private void HandleSelectedOptionChanged(string value) => selectedOption = value;
    private void HandleSliderValueChanged(double value) => sliderValue = value;
    private void HandleTemperatureChanged(double value) => temperature = value;
    private void HandleTogglePressedChanged(bool value) => togglePressed = value;
    private void HandleTogglePressed2Changed(bool value) => togglePressed2 = value;
    private void HandleTogglePressed3Changed(bool value) => togglePressed3 = value;
    private void HandleSidebarOpenChanged(bool value) => isSidebarOpen = value;
    private void HandleDropdownOpenChanged(bool value) => isDropdownOpen = value;
    private void HandlePopoverOpenChanged(bool value) => isPopoverOpen = value;
    private void HandleShowToastChanged(bool value) => showToast = value;
    private void HandleShowDestructiveToastChanged(bool value) => showDestructiveToast = value;
    private void HandleShowSuccessToastChanged(bool value) => showSuccessToast = value;
    private void HandleShowWarningToastChanged(bool value) => showWarningToast = value;
    private void HandleOtp1Changed(string value) => otp1 = value;
    private void HandleOtp2Changed(string value) => otp2 = value;
    private void HandleOtp3Changed(string value) => otp3 = value;
    private void HandleSelectedTechChanged(string value) => selectedTech = value;
    private void HandleSelectedFrameworkChanged(string value) => selectedFramework = value;
    private void HandleSelectedDateChanged(DateTime? value) => selectedDate = value;
    private void HandleSelectedDate2Changed(DateTime? value) => selectedDate2 = value;
    private void HandleRangeStartDateChanged(DateTime? value) => rangeStartDate = value;
    private void HandleRangeEndDateChanged(DateTime? value) => rangeEndDate = value;
    private void HandleSelectedTimeChanged(TimeSpan? value) => selectedTime = value;
    private void HandleFormNameChanged(string value) => formName = value;
    private void HandleFormEmailChanged(string value) => formEmail = value;
    private void HandleFormPhoneChanged(string value) => formPhone = value;
    private void HandleFormSubmittedChanged(bool value) => formSubmitted = value;
    private void HandleShowAlertDialogChanged(bool value) => showAlertDialog = value;
    private void HandleSelectedCalendarDateChanged(DateTime? value) => selectedCalendarDate = value;
    private void HandleShowCommandChanged(bool value) => showCommand = value;
    private async Task HandleCommandSelected(CommandItem item)
    {
        if (item.Action != null)
        {
            await item.Action();
        }
    }
    private void HandleContextMenuSelect(ContextMenuItem item) { }
    private void HandleTabChange(string tabId) => activeTab = tabId;
    private void HandleStepChange(int step) => currentStep = step;
    private void HandleTextCarouselSlideChange(int slide) => textCarouselSlide = slide;
    private void HandleImageCarouselSlideChange(int slide) => imageCarouselSlide = slide;
    private void HandlePageChange(int page) => currentPage = page;

    private void EditUser(User user) { }
    private void DeleteUser(User user) { }
}
