@using BlazorInteractiveServer.Components.UI

<Dialog IsOpen="IsOpen" Title="@Title" Description="@Description" OnClose="OnBackdropClick">
    <Footer>
        @if (CancelText != null)
        {
            <button class="mt-3 inline-flex w-full justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium shadow-sm hover:bg-accent hover:text-accent-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 sm:mt-0 sm:w-auto" @onclick="HandleCancel">@CancelText</button>
        }
        <button class="inline-flex w-full justify-center rounded-md bg-destructive px-4 py-2 text-sm font-medium text-destructive-foreground shadow-sm hover:bg-destructive/90 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 sm:w-auto" @onclick="HandleConfirm">@ConfirmText</button>
    </Footer>
</Dialog>

@code {
    [Parameter]
    public bool IsOpen { get; set; }

    [Parameter]
    public string Title { get; set; } = "";

    [Parameter]
    public string Description { get; set; } = "";

    [Parameter]
    public string ConfirmText { get; set; } = "Continue";

    [Parameter]
    public string? CancelText { get; set; } = "Cancel";

    [Parameter]
    public string ConfirmVariant { get; set; } = "default";

    [Parameter]
    public EventCallback OnConfirm { get; set; }

    [Parameter]
    public EventCallback OnCancel { get; set; }

    [Parameter]
    public EventCallback<bool> IsOpenChanged { get; set; }

    private async Task HandleConfirm()
    {
        await OnConfirm.InvokeAsync();
        await CloseDialog();
    }

    private async Task HandleCancel()
    {
        await OnCancel.InvokeAsync();
        await CloseDialog();
    }

    private async Task OnBackdropClick()
    {
        await CloseDialog();
    }

    private async Task CloseDialog()
    {
        IsOpen = false;
        await IsOpenChanged.InvokeAsync(IsOpen);
    }
}
