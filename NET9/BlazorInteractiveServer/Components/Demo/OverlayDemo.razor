@namespace BlazorInteractiveServer.Components.Demo
@using BlazorInteractiveServer.Components
@using BlazorInteractiveServer.Components.Services
@inject ISonnerService Sonner

<section class="border border-border rounded-lg p-6 bg-card">
    <h2 class="text-2xl font-semibold mb-4 text-card-foreground">Overlays</h2>
    <div class="space-y-6">
        <!-- Dropdown Demo (legacy: Trigger + ChildContent) -->
        <div>
            <h3 class="text-xl font-semibold mb-2 text-card-foreground">Dropdown</h3>
            <Dropdown @bind-IsOpen="IsDropdownOpen">
                <Trigger>
                    <span>Open Menu</span>
                    <span class="material-symbols-outlined text-sm ml-2">expand_more</span>
                </Trigger>
                <ChildContent>
                    <button class="relative flex w-full cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-accent">
                        Profile
                    </button>
                    <button class="relative flex w-full cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-accent">
                        Settings
                    </button>
                </ChildContent>
            </Dropdown>
        </div>

        <!-- Dropdown (Compositional: DropdownTrigger, DropdownContent, DropdownItem) -->
        <div>
            <h3 class="text-xl font-semibold mb-2 text-card-foreground">Dropdown (Compositional)</h3>
            <Dropdown>
                <DropdownTrigger>
                    <Button Variant="@ButtonVariant.Outline">
                        Options <span class="material-symbols-outlined text-sm ml-1">expand_more</span>
                    </Button>
                </DropdownTrigger>
                <DropdownContent>
                    <DropdownItem OnClick="() => { }">Profile</DropdownItem>
                    <DropdownItem OnClick="() => { }">Settings</DropdownItem>
                </DropdownContent>
            </Dropdown>
        </div>

        <!-- Tooltip Demo -->
        <div>
            <h3 class="text-xl font-semibold mb-2 text-card-foreground">Tooltip</h3>
            <div class="flex flex-wrap gap-4">
                <Tooltip Placement="top">
                    <Trigger>
                        <Button Variant="@ButtonVariant.Outline">Hover me (Top)</Button>
                    </Trigger>
                    <Content>
                        <p>This is a tooltip on top!</p>
                    </Content>
                </Tooltip>
                <Tooltip Placement="bottom">
                    <Trigger>
                        <Button Variant="@ButtonVariant.Outline">Hover me (Bottom)</Button>
                    </Trigger>
                    <Content>
                        <p>This is a tooltip on bottom!</p>
                    </Content>
                </Tooltip>
                <Tooltip Placement="left">
                    <Trigger>
                        <Button Variant="@ButtonVariant.Outline">Hover me (Left)</Button>
                    </Trigger>
                    <Content>
                        <p>Tooltip on the left</p>
                    </Content>
                </Tooltip>
            </div>
        </div>

        <!-- Popover Demo (legacy) -->
        <div>
            <h3 class="text-xl font-semibold mb-2 text-card-foreground">Popover</h3>
            <Popover @bind-IsOpen="IsPopoverOpen">
                <Trigger>
                    <Button Variant="@ButtonVariant.Outline">Open Popover</Button>
                </Trigger>
                <ChildContent>
                    <div class="space-y-2">
                        <h4 class="font-semibold">Dimensions</h4>
                        <div class="space-y-2">
                            <Label>Width</Label>
                            <Input Placeholder="100%" />
                        </div>
                        <div class="space-y-2">
                            <Label>Height</Label>
                            <Input Placeholder="25px" />
                        </div>
                    </div>
                </ChildContent>
            </Popover>
        </div>

        <!-- Popover (Compositional: PopoverTrigger, PopoverContent) -->
        <div>
            <h3 class="text-xl font-semibold mb-2 text-card-foreground">Popover (Compositional)</h3>
            <Popover Placement="bottom">
                <PopoverTrigger>
                    <Button Variant="@ButtonVariant.Outline">Dimensions (Compositional)</Button>
                </PopoverTrigger>
                <PopoverContent>
                    <p class="text-sm text-muted-foreground">Uses PopoverTrigger + PopoverContent.</p>
                </PopoverContent>
            </Popover>
        </div>

        <!-- Sonner Toast Demo -->
        <div>
            <h3 class="text-xl font-semibold mb-2 text-card-foreground">Sonner Toast</h3>
            <p class="text-sm text-muted-foreground mb-3">Stacking toasts with smooth animations (bottom-right)</p>
            <div class="flex flex-wrap gap-2">
                <Button OnClick="HandleShowToast">Show Default Toast</Button>
                <Button Variant="@ButtonVariant.Destructive" OnClick="HandleShowDestructiveToast">Show Error Toast</Button>
                <Button Variant="@ButtonVariant.Outline" OnClick="HandleShowSuccessToast">Show Success Toast</Button>
                <Button OnClick="HandleShowToast" Variant="@ButtonVariant.Secondary">Show Multiple</Button>
            </div>
        </div>

        <!-- Drawer & Sheet (Compositional) -->
        <div>
            <h3 class="text-xl font-semibold mb-2 text-card-foreground">Drawer & Sheet</h3>
            <div class="flex flex-wrap gap-2">
                <Drawer @bind-Open="drawerOpen" Side="@DrawerSide.Bottom">
                    <DrawerTrigger>
                        <Button Variant="@ButtonVariant.Outline">Open Drawer</Button>
                    </DrawerTrigger>
                    <DrawerContent>
                        <h4 class="font-semibold">Drawer Title</h4>
                        <p class="text-sm text-muted-foreground">Drawer content with Trigger/Content pattern.</p>
                        <Button @onclick="() => drawerOpen = false">Close</Button>
                    </DrawerContent>
                </Drawer>
                <Sheet @bind-Open="sheetOpen" Side="@SheetSide.Right">
                    <SheetTrigger>
                        <Button Variant="@ButtonVariant.Outline">Open Sheet</Button>
                    </SheetTrigger>
                    <SheetContent>
                        <h4 class="font-semibold">Sheet Title</h4>
                        <p class="text-sm text-muted-foreground">Sheet content with Trigger/Content pattern.</p>
                        <Button @onclick="() => sheetOpen = false">Close</Button>
                    </SheetContent>
                </Sheet>
            </div>
        </div>
    </div>
</section>

@code {
    [Parameter] public bool IsDropdownOpen { get; set; } = false;
    [Parameter] public EventCallback<bool> IsDropdownOpenChanged { get; set; }
    [Parameter] public bool IsPopoverOpen { get; set; } = false;
    [Parameter] public EventCallback<bool> IsPopoverOpenChanged { get; set; }

    private bool drawerOpen = false;
    private bool sheetOpen = false;

    private void HandleShowToast()
    {
        Sonner.Show("Notification", "Your action was successful!");
    }

    private void HandleShowDestructiveToast()
    {
        Sonner.Show("Error", "Something went wrong!", "destructive");
    }

    private void HandleShowSuccessToast()
    {
        Sonner.Show("Success", "Changes saved successfully!", "success");
    }
}
